"use strict";function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var o=0;o<t.length;o++){var r=t[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,_toPropertyKey(r.key),r)}}function _createClass(e,t,o){return t&&_defineProperties(e.prototype,t),o&&_defineProperties(e,o),Object.defineProperty(e,"prototype",{writable:!1}),e}function _toPropertyKey(e){e=_toPrimitive(e,"string");return"symbol"===_typeof(e)?e:String(e)}function _toPrimitive(e,t){if("object"!==_typeof(e)||null===e)return e;var o=e[Symbol.toPrimitive];if(void 0===o)return("string"===t?String:Number)(e);o=o.call(e,t||"default");if("object"!==_typeof(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}var LazyLoadImg=function(){function r(e){_classCallCheck(this,r);var t,o={selector:".lazy-img",virtualSrc:"",callback:null};for(t in o)o.hasOwnProperty(t)&&!e.hasOwnProperty(t)&&(e[t]=o[t]);this.options=e,this.images=[].slice.call(document.querySelectorAll(e.selector)),this.init()}return _createClass(r,[{key:"init",value:function(){var t=this;window.IntersectionObserver?(this.observer=new IntersectionObserver(function(e){e.forEach(function(e){0<e.intersectionRatio&&(t.observer.unobserve(e.target),e=e.target,t.loadImage(e))})},{root:null,rootMargin:"0px",threshold:[0]}),this.images.forEach(function(e){t.observer.observe(e)})):(this.LazyLoadImage(),document.addEventListener("scroll",this.LazyLoadImage.bind(this)))}},{key:"LazyLoadImage",value:function(){var r=this,n=window.innerHeight,i=window.innerWidth;this.images.forEach(function(e){var t=e.getBoundingClientRect(),o=t.top,t=t.left;o<=n&&t<=i&&r.loadImage(e)})}},{key:"loadImages",value:function(){var t=this;this.images.forEach(function(e){t.loadImage(e)})}},{key:"loadImage",value:function(e){var t=e.getAttribute(this.options.virtualSrc);this.options.callback?this.options.callback(e,t):"img"===e.tagName.toLowerCase()?t&&(e.src=t):e.style.backgroundImage="url(".concat(t,")")}},{key:"loadAndDestroy",value:function(){this.loadImages(),this.destroy()}},{key:"destroy",value:function(){this.observer.disconnect(),document.removeEventListener("scroll",this.LazyLoadImage),this.settings=null}}]),r}();new LazyLoadImg({selector:".lazy-loader",virtualSrc:"lazy-src",callback:function(e,t){var o=new Image;o.src=t,o.onload=function(){e.src=t},o.onerror=o.onabort=function(){e.remove()}}});